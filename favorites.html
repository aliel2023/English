<!DOCTYPE html>
<html lang="az">

<head>
    <!-- KÄ°BER TÆHLÃœKÆSÄ°ZLÄ°K QATI (Security Enforcements) -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.gstatic.com https://apis.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com data:; img-src 'self' data: https:; connect-src 'self' https://firestore.googleapis.com https://identitytoolkit.googleapis.com https://securetoken.googleapis.com https://script.google.com https://script.googleusercontent.com https://generativelanguage.googleapis.com; frame-src 'self'; object-src 'none'; base-uri 'self';">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    
    <!-- Clickjacking / Iframe QorumasÄ± (Framebusting) -->
    <style id="antiClickjack">body{display:none !important;}</style>
    <script>
        if (self === top) {
            var antiClickjack = document.getElementById("antiClickjack");
            if (antiClickjack) antiClickjack.parentNode.removeChild(antiClickjack);
        } else {
            top.location = self.location;
        }
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sevilmis sözl?r, qrammatika qaydalari v? ifad?l?r - Alielenglish">
    <title>Sevimlil?r - Alielenglish</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&subset=latin,latin-ext&display=swap">
    <link rel="stylesheet" href="styles/design-system.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/favorites.css">
    <link rel="stylesheet" href="styles/auth.css">
    <script>
        // Firebase auth event-? ?saslanir — localStorage YOX
        // favorites.js alielAuthReady event-i g?ld?nd? content göst?r?cek
        window.addEventListener('DOMContentLoaded', function () {
            var favContent = document.getElementById('favContent');
            var favAuth = document.getElementById('favAuthRequired');
            if (favContent) favContent.classList.add('hidden');
            if (favAuth) favAuth.classList.add('hidden');
        });
    </script>
</head>

<body>
    <!-- Header -->
    <header class="site-header">
        <nav class="main-nav">
            <div class="nav-container">
                <div class="logo-section">
                    <div class="logo"><span class="logo-icon">A</span></div>
                    <span class="brand-name">Alielenglish</span>
                </div>
                <ul class="nav-menu" id="navMenu">
                    <li><a href="index.html" data-i18n="nav.home">Ana S?hif?</a></li>
                    <li><a href="daily-word.html" data-i18n="nav.daily">Günün Sözü</a></li>
                    <li><a href="speaking.html" data-i18n="nav.speaking">Danisiq Pratikasi</a></li>
                    <li><a href="test.html" data-i18n="nav.test">S?viyy? Testi</a></li>
                    <li><a href="resources.html" data-i18n="nav.resources">Resurslar</a></li>
                    <li><a href="pricing.html" data-i18n="nav.pricing">Qiym?tl?r</a></li>
                    <li><a href="contact.html" data-i18n="nav.contact">?laq?</a></li>
                </ul>
                <div class="nav-actions">
                    <div class="lang-dropdown nav-item">
                        <button class="lang-btn current-lang" id="currentLangBtn"
                            onclick="toggleLangDropdown()">AZ</button>
                        <div class="lang-menu" id="langMenu">
                            <button class="lang-option" onclick="switchLanguage('az', event)">AZ</button>
                            <button class="lang-option" onclick="switchLanguage('en', event)">EN</button>
                        </div>
                    </div>
                    <button class="mobile-toggle" onclick="toggleMobileMenu()">
                        <span></span><span></span><span></span>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Page Hero -->
    <section class="fav-hero">
        <div class="container">
            <h1 class="section-title">?? Sevimlil?r</h1>
            <p class="fav-subtitle">?lav? etdiyiniz sözl?r, qrammatika qaydalari v? ifad?l?r burada saxlanilir</p>
            <div id="favStats" class="fav-stats-bar"></div>
        </div>
    </section>

    <!-- Auth Required Message -->
    <div id="favAuthRequired" class="auth-required hidden">
        <div class="container">
            <div class="auth-prompt-card">
                <div class="auth-prompt-icon">??</div>
                <h2>Hesaba Daxil Olun</h2>
                <p>Sevimlil?rinizi görm?k üçün hesabiniza daxil olun v? ya yeni hesab yaradin.</p>
                <div style="display:flex;gap:1rem;justify-content:center;flex-wrap:wrap;">
                    <a href="login.html?next=favorites.html" class="btn btn-primary">Daxil Ol</a>
                    <a href="register.html" class="btn btn-secondary">Qeydiyyat</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Favorites Content -->
    <div id="favContent" class="hidden">
        <!-- Tabs -->
        <div class="fav-tabs-wrapper">
            <div class="container">
                <div class="fav-tabs">
                    <button class="fav-tab-btn active" onclick="switchFavTab('words', this)">
                        ?? Sözl?r <span class="fav-tab-count" id="wordCount">0</span>
                    </button>
                    <button class="fav-tab-btn" onclick="switchFavTab('grammars', this)">
                        ?? Qrammatika <span class="fav-tab-count" id="grammarCount">0</span>
                    </button>
                    <button class="fav-tab-btn" onclick="switchFavTab('phrases', this)">
                        ?? Ifad?l?r <span class="fav-tab-count" id="phraseCount">0</span>
                    </button>
                </div>
                <div class="fav-search-wrap">
                    <input type="text" id="favSearch" placeholder="?? Axtar..." oninput="filterFavorites()"
                        class="fav-search">
                </div>
            </div>
        </div>

        <!-- Words Tab -->
        <section id="tab_words" class="fav-section">
            <div class="container">
                <div id="wordsGrid" class="favorites-grid"></div>
                <div id="wordsEmpty" class="fav-empty hidden">
                    <div class="fav-empty-icon">??</div>
                    <p>H?l? heç bir söz sevimlil?r? ?lav? edilm?yib.</p>
                    <a href="daily-word.html" class="btn btn-primary">Günün Sözün? Get</a>
                </div>
            </div>
        </section>

        <!-- Grammars Tab -->
        <section id="tab_grammars" class="fav-section hidden">
            <div class="container">
                <div id="grammarsGrid" class="favorites-grid"></div>
                <div id="grammarsEmpty" class="fav-empty hidden">
                    <div class="fav-empty-icon">??</div>
                    <p>H?l? heç bir qrammatika qaydasi sevimlil?r? ?lav? edilm?yib.</p>
                    <a href="resources.html" class="btn btn-primary">Resurslara Get</a>
                </div>
            </div>
        </section>

        <!-- Phrases Tab -->
        <section id="tab_phrases" class="fav-section hidden">
            <div class="container">
                <div id="phrasesGrid" class="favorites-grid"></div>
                <div id="phrasesEmpty" class="fav-empty hidden">
                    <div class="fav-empty-icon">??</div>
                    <p>H?l? heç bir ifad? sevimlil?r? ?lav? edilm?yib.</p>
                    <a href="resources.html" class="btn btn-primary">Resurslara Get</a>
                </div>
            </div>
        </section>
    </div>

    <!-- Word Detail Modal -->
    <div id="wordDetailModal" class="modal">
        <div class="modal-content word-detail-modal">
            <button class="modal-close" onclick="closeWordDetail()">×</button>
            <div id="wordDetailContent"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-bottom">
                <p data-i18n="footer.rights">© 2025 Alielenglish. Bütün hüquqlar qorunur.</p>
            </div>
        </div>
    </footer>

    <script src="scripts/design-system.js"></script>
    <script src="scripts/i18n.js"></script>
    <script src="scripts/main.js"></script>
    <script type="module" src="scripts/auth.js"></script>
    <script src="scripts/favorites.js"></script>
</body>

</html>
